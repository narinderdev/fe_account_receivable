<div class="sidebar-wrapper">
  <div class="sidebar">
    <div>
      <div class="sidebar-header">
        <h1 class="sidebar-title">Account Receivable</h1>
      </div>

      <nav class="sidebar-nav">
        <a
          *ngIf="canViewDashboard"
          routerLink="dashboard"
          routerLinkActive="active"
          #dashLink="routerLinkActive"
          class="nav-item"
        >
          <img [src]="dashLink.isActive ? '/home1.svg' : '/home.svg'" class="nav-icon" />
          Dashboard
        </a>

        <a
          *ngIf="canViewCustomers"
          routerLink="customers"
          routerLinkActive="active"
          #customersLink="routerLinkActive"
          class="nav-item"
        >
          <img [src]="customersLink.isActive ? '/customers1.svg' : '/customers.svg'" class="nav-icon" />
          Customers
        </a>

        <a
          *ngIf="canViewInvoices"
          routerLink="invoices"
          routerLinkActive="active"
          #invoicesLink="routerLinkActive"
          class="nav-item"
        >
          <img [src]="invoicesLink.isActive ? '/invoice1.svg' : '/invoice.svg'" class="nav-icon" />
          Invoices
        </a>

        <a
          *ngIf="canViewPayments"
          routerLink="payments"
          routerLinkActive="active"
          #paymentsLink="routerLinkActive"
          class="nav-item"
        >
          <img [src]="paymentsLink.isActive ? '/payment1.svg' : '/payment.svg'" class="nav-icon" />
          Payments
        </a>

        <a
          *ngIf="canViewReports"
          routerLink="ar-reports"
          routerLinkActive="active"
          #reportsLink="routerLinkActive"
          class="nav-item"
        >
          <img [src]="reportsLink.isActive ? '/reports1.svg' : '/reports.svg'" class="nav-icon" />
          Aging & Reports
        </a>

        <a
          *ngIf="canViewCollections"
          routerLink="collections"
          routerLinkActive="active"
          #collectionsLink="routerLinkActive"
          class="nav-item"
        >
          <img [src]="collectionsLink.isActive ? '/collection1.svg' : '/collection.svg'" class="nav-icon" />
          Collections & Dispute
        </a>

        <!-- <a routerLink="integration" routerLinkActive="active" #integrationLink="routerLinkActive" class="nav-item">
          <img [src]="integrationLink.isActive ? '/integration1.svg' : '/integration.svg'" class="nav-icon" />
          Integration
        </a> -->

        <div class="nav-item setup-parent" *ngIf="showSetupLinks" (click)="toggleSetup()">
          <img src="/settings.svg" class="nav-icon" />
          Setup / Admin
          <span class="arrow" [class.open]="setupOpen">&rsaquo;</span>
        </div>

        <div class="setup-children" *ngIf="setupOpen && showSetupLinks">
          <a *ngIf="canViewCompany" routerLink="company" routerLinkActive="active" class="sub-nav-item"
            >Company</a
          >
          <a *ngIf="canViewUsers" routerLink="users" routerLinkActive="active" class="sub-nav-item">Users</a>
          <a *ngIf="canViewRoles" routerLink="roles" routerLinkActive="active" class="sub-nav-item">Roles</a>
        </div>
      </nav>
    </div>

    <div class="sidebar-footer">
      <button type="button" class="nav-item logout-btn" (click)="signOut()">
        <img src="/logout.svg" class="nav-icon" />
        Sign Out
      </button>
    </div>
  </div>

  <div class="mobile-nav">
    <div class="mobile-nav-bar">
      <button
        type="button"
        class="menu-toggle"
        (click)="toggleMobileMenu()"
        [attr.aria-expanded]="mobileMenuOpen"
      >
        <span class="sr-only">Toggle navigation</span>
        <span class="menu-bar"></span>
        <span class="menu-bar"></span>
        <span class="menu-bar"></span>
      </button>

      <h1 class="mobile-title">Account Receivable</h1>
    </div>

    <div class="mobile-overlay" [class.open]="mobileMenuOpen" (click)="closeMobileMenu()"></div>

    <div class="mobile-drawer" [class.open]="mobileMenuOpen">
      <nav class="mobile-nav-links">
        <a
          *ngIf="canViewDashboard"
          routerLink="dashboard"
          routerLinkActive="active"
          #mobileDash="routerLinkActive"
          (click)="closeMobileMenu()"
        >
          <img [src]="mobileDash.isActive ? '/home1.svg' : '/home.svg'" class="nav-icon" />
          Dashboard
        </a>

        <a
          *ngIf="canViewCustomers"
          routerLink="customers"
          routerLinkActive="active"
          #mobileCustomers="routerLinkActive"
          (click)="closeMobileMenu()"
        >
          <img [src]="mobileCustomers.isActive ? '/customers1.svg' : '/customers.svg'" class="nav-icon" />
          Customers
        </a>

        <a
          *ngIf="canViewInvoices"
          routerLink="invoices"
          routerLinkActive="active"
          #mobileInvoices="routerLinkActive"
          (click)="closeMobileMenu()"
        >
          <img [src]="mobileInvoices.isActive ? '/invoice1.svg' : '/invoice.svg'" class="nav-icon" />
          Invoices
        </a>

        <a
          *ngIf="canViewPayments"
          routerLink="payments"
          routerLinkActive="active"
          #mobilePayments="routerLinkActive"
          (click)="closeMobileMenu()"
        >
          <img [src]="mobilePayments.isActive ? '/payment1.svg' : '/payment.svg'" class="nav-icon" />
          Payments
        </a>

        <a
          *ngIf="canViewReports"
          routerLink="ar-reports"
          routerLinkActive="active"
          #mobileReports="routerLinkActive"
          (click)="closeMobileMenu()"
        >
          <img [src]="mobileReports.isActive ? '/reports1.svg' : '/reports.svg'" class="nav-icon" />
          Aging & Reports
        </a>

        <a
          *ngIf="canViewCollections"
          routerLink="collections"
          routerLinkActive="active"
          #mobileCollections="routerLinkActive"
          (click)="closeMobileMenu()"
        >
          <img [src]="mobileCollections.isActive ? '/collection1.svg' : '/collection.svg'" class="nav-icon" />
          Collections & Dispute
        </a>

        <!-- <a routerLink="integration" routerLinkActive="active" #mobileIntegration="routerLinkActive" (click)="closeMobileMenu()">
          <img [src]="mobileIntegration.isActive ? '/integration1.svg' : '/integration.svg'" class="nav-icon" />
          Integration
        </a> -->

        <button
          type="button"
          class="mobile-setup-toggle"
          *ngIf="showSetupLinks"
          (click)="toggleMobileSetup($event)"
        >
          <div class="label">
            <img src="/setup.svg" class="nav-icon" />
            Setup / Admin
          </div>
          <span class="arrow" [class.open]="mobileSetupOpen">&rsaquo;</span>
        </button>

        <div class="mobile-setup-children" *ngIf="mobileSetupOpen && showSetupLinks">
          <a *ngIf="canViewCompany" routerLink="company" routerLinkActive="active" (click)="closeMobileMenu()"
            >Company</a
          >
          <a *ngIf="canViewUsers" routerLink="users" routerLinkActive="active" (click)="closeMobileMenu()">Users</a>
          <a *ngIf="canViewRoles" routerLink="roles" routerLinkActive="active" (click)="closeMobileMenu()">Roles</a>
        </div>
      </nav>

      <button type="button" class="logout-btn mobile" (click)="signOut()">
        <img src="/logout.svg" class="nav-icon" />
        Sign Out
      </button>
    </div>
  </div>
</div>
