<form class="otp-form" (ngSubmit)="submit()">
  <div class="otp-container">
    <div class="otp-card">
      <h2 class="title">Verify Your Email</h2>
      <p class="subtitle">
        We sent a 6-digit code to
        <span class="email" *ngIf="email; else genericEmail">{{ email }}</span
        >. Enter it below to finish creating your account.
      </p>
      <ng-template #genericEmail>your inbox</ng-template>

      <div class="otp-inputs">
        <input
          #otpInput
          *ngFor="let _ of code; let i = index; trackBy: trackByIndex"
          type="text"
          maxlength="1"
          inputmode="numeric"
          autocomplete="one-time-code"
          (input)="handleInput($event, i)"
          (keydown)="handleKeyDown($event, i)"
          (paste)="handlePaste($event, i)"
        />
      </div>

      <small class="error" *ngIf="errorMessage">{{ errorMessage }}</small>

      <button class="btn-verify" type="submit" [disabled]="loading">
        <ng-container *ngIf="!loading; else loadingTpl">Verify Code</ng-container>
        <ng-template #loadingTpl>
          <app-spinner></app-spinner>
        </ng-template>
      </button>

      <button class="link-button" type="button" (click)="editEmail()">Use a different email</button>

      <p class="login-hint">
        Already verified?
        <a href="/login">Back to login</a>
      </p>
    </div>
  </div>
</form>
