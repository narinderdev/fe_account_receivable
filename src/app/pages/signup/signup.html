<form [formGroup]="form" (ngSubmit)="submit()">
  <div class="signup-container">
    <div class="signup-card">
      <h2 class="title">Create Account</h2>
      <p class="subtitle">Start managing your receivables today!</p>

      <div class="two-column">
        <div class="form-group">
          <label>First Name</label>
          <input type="text" formControlName="firstName" placeholder="Jane" />
          <small
            class="error"
            *ngIf="form.get('firstName')?.touched && form.get('firstName')?.invalid"
          >
            First name must be at least 2 letters.
          </small>
        </div>

        <div class="form-group">
          <label>Last Name</label>
          <input type="text" formControlName="lastName" placeholder="Doe" />
          <small
            class="error"
            *ngIf="form.get('lastName')?.touched && form.get('lastName')?.invalid"
          >
            Last name must be at least 2 letters.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>Email Address</label>
        <div class="input-wrapper">
          <input
            type="email"
            formControlName="email"
            placeholder="name@company.com"
            class="email-input-lowercase"
            (blur)="onEmailBlur()"
          />
          <img src="/mail.svg" class="input-icon-left" />
        </div>

        <small class="error" *ngIf="form.get('email')?.touched && form.get('email')?.invalid">
          Enter a valid email address.
        </small>
      </div>

      <div class="form-group">
        <label>Password</label>
        <div class="input-wrapper">
          <input
            [type]="passwordVisible ? 'text' : 'password'"
            formControlName="password"
            placeholder="Create a password"
          />
          <img src="/lock.svg" class="input-icon-left" />
          <img
            [src]="passwordVisible ? 'show.svg' : 'eye.svg'"
            class="input-icon password-toggle"
            (click)="togglePasswordVisibility('password')"
            alt="Toggle password visibility"
          />
        </div>

        <small class="error" *ngIf="form.get('password')?.touched && form.get('password')?.invalid">
          Password must be 8+ chars, include 1 uppercase, 1 number & 1 symbol.
        </small>
      </div>

      <div class="form-group">
        <label>Confirm Password</label>
        <div class="input-wrapper">
          <input
            [type]="confirmPasswordVisible ? 'text' : 'password'"
            formControlName="confirmPassword"
            placeholder="Confirm your password"
          />
          <img src="/relock.svg" class="input-icon-left" />
          <img
            [src]="confirmPasswordVisible ? 'show.svg' : 'eye.svg'"
            class="input-icon password-toggle"
            (click)="togglePasswordVisibility('confirmPassword')"
            alt="Toggle confirm password visibility"
          />
        </div>

        <small class="error" *ngIf="form.touched && form.errors?.['mismatch']">
          Passwords do not match.
        </small>
      </div>

      <button class="btn-create" type="submit" [disabled]="loading">
        <ng-container *ngIf="!loading; else signupLoadingTpl">Create Account</ng-container>
        <ng-template #signupLoadingTpl>
          <app-spinner></app-spinner>
        </ng-template>
      </button>

      <!-- LOGIN LINK -->
      <p class="login-text">
        Already have an account?
        <a class="login-link" routerLink="/login" (mousedown)="$event.preventDefault()"> Login </a>
      </p>

      <!-- TERMS -->
      <p class="terms-text">
        By clicking "Create Account", you agree to our
        <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>.
      </p>
    </div>
  </div>
</form>
